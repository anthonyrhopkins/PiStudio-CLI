kind: AdaptiveDialog
modelDescription: Phase router for research execution - routes to research agents based on current phase
beginDialog:
  kind: OnRecognizedIntent
  id: main
  intent:
    displayName: Phase Router Internal
    triggerQueries:
      - __internal_phase_router__
  actions:
    - kind: SendActivity
      id: sendActivity_PhaseStatus
      activity: "Phase Router - Current phase: {Global.CurrentPhase}"

    - kind: ConditionGroup
      id: conditionGroup_PhaseRouter
      conditions:
        - id: phase_0
          condition: =Global.CurrentPhase = 0
          actions:
            - kind: SendActivity
              id: send_phase0
              activity: "[0/11] Discovering leadership team..."

            - kind: BeginDialog
              id: call_Leadership
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent

            - kind: SetVariable
              id: increment_phase0
              variable: Global.CurrentPhase
              value: =1

            - kind: SetVariable
              id: track_phase0
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "0,"

            - kind: BeginDialog
              id: continue_phase0
              dialog: my_bot.topic.phase_router

        - id: phase_1
          condition: =Global.CurrentPhase = 1
          actions:
            - kind: SendActivity
              id: send_phase1
              activity: "[1/11] Finding executive social profiles..."

            - kind: BeginDialog
              id: call_SocialProfile
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent_Rvi

            - kind: SetVariable
              id: increment_phase1
              variable: Global.CurrentPhase
              value: =2

            - kind: SetVariable
              id: track_phase1
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "1,"

            - kind: BeginDialog
              id: continue_phase1
              dialog: my_bot.topic.phase_router

        - id: phase_2
          condition: =Global.CurrentPhase = 2
          actions:
            - kind: SendActivity
              id: send_phase2
              activity: "[2/11] Analyzing company social media presence..."

            - kind: BeginDialog
              id: call_CompanySocials
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent_qOR

            - kind: SetVariable
              id: increment_phase2
              variable: Global.CurrentPhase
              value: =3

            - kind: SetVariable
              id: track_phase2
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "2,"

            - kind: BeginDialog
              id: continue_phase2
              dialog: my_bot.topic.phase_router

        - id: phase_3
          condition: =Global.CurrentPhase = 3
          actions:
            - kind: SendActivity
              id: send_phase3
              activity: "[3/11] Researching industry context..."

            - kind: BeginDialog
              id: call_IndustryAnalysis
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent_kCm

            - kind: SetVariable
              id: increment_phase3
              variable: Global.CurrentPhase
              value: =4

            - kind: SetVariable
              id: track_phase3
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "3,"

            - kind: BeginDialog
              id: continue_phase3
              dialog: my_bot.topic.phase_router

        - id: phase_4
          condition: =Global.CurrentPhase = 4
          actions:
            - kind: SendActivity
              id: send_phase4
              activity: "[4/11] Analyzing financial performance..."

            - kind: BeginDialog
              id: call_FinancialPerformance
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent_Xae

            - kind: SetVariable
              id: increment_phase4
              variable: Global.CurrentPhase
              value: =5

            - kind: SetVariable
              id: track_phase4
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "4,"

            - kind: BeginDialog
              id: continue_phase4
              dialog: my_bot.topic.phase_router

        - id: phase_5
          condition: =Global.CurrentPhase = 5
          actions:
            - kind: SendActivity
              id: send_phase5
              activity: "[5/11] Gathering recent developments..."

            - kind: BeginDialog
              id: call_RecentDevelopments
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent_Boe

            - kind: SetVariable
              id: increment_phase5
              variable: Global.CurrentPhase
              value: =6

            - kind: SetVariable
              id: track_phase5
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "5,"

            - kind: BeginDialog
              id: continue_phase5
              dialog: my_bot.topic.phase_router

        - id: phase_6
          condition: =Global.CurrentPhase = 6
          actions:
            - kind: SendActivity
              id: send_phase6
              activity: "[6/11] Researching patents and IP..."

            - kind: BeginDialog
              id: call_PatentIntelligence
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent_-zx

            - kind: SetVariable
              id: increment_phase6
              variable: Global.CurrentPhase
              value: =7

            - kind: SetVariable
              id: track_phase6
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "6,"

            - kind: BeginDialog
              id: continue_phase6
              dialog: my_bot.topic.phase_router

        - id: phase_7
          condition: =Global.CurrentPhase = 7
          actions:
            - kind: SendActivity
              id: send_phase7
              activity: "[7/11] Analyzing SEC filings..."

            - kind: BeginDialog
              id: call_SECFilings
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent_TJ6

            - kind: SetVariable
              id: increment_phase7
              variable: Global.CurrentPhase
              value: =8

            - kind: SetVariable
              id: track_phase7
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "7,"

            - kind: BeginDialog
              id: continue_phase7
              dialog: my_bot.topic.phase_router

        - id: phase_8
          condition: =Global.CurrentPhase = 8
          actions:
            - kind: SendActivity
              id: send_phase8
              activity: "[8/11] Gathering hiring intelligence..."

            - kind: BeginDialog
              id: call_HiringIntelligence
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent_o4d

            - kind: SetVariable
              id: increment_phase8
              variable: Global.CurrentPhase
              value: =9

            - kind: SetVariable
              id: track_phase8
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "8,"

            - kind: BeginDialog
              id: continue_phase8
              dialog: my_bot.topic.phase_router

        - id: phase_9
          condition: =Global.CurrentPhase = 9
          actions:
            - kind: SendActivity
              id: send_phase9
              activity: "[9/11] Researching event participation..."

            - kind: BeginDialog
              id: call_EventsIntelligence
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent_f2H

            - kind: SetVariable
              id: increment_phase9
              variable: Global.CurrentPhase
              value: =10

            - kind: SetVariable
              id: track_phase9
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "9,"

            - kind: BeginDialog
              id: continue_phase9
              dialog: my_bot.topic.phase_router

        - id: phase_10
          condition: =Global.CurrentPhase = 10
          actions:
            - kind: SendActivity
              id: send_phase10
              activity: "[10/11] Checking FDA regulations..."

            - kind: BeginDialog
              id: call_FDARegulation
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent_H5P

            - kind: SetVariable
              id: increment_phase10
              variable: Global.CurrentPhase
              value: =11

            - kind: SetVariable
              id: track_phase10
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "10,"

            - kind: BeginDialog
              id: continue_phase10
              dialog: my_bot.topic.phase_router

        - id: phase_11
          condition: =Global.CurrentPhase = 11
          actions:
            - kind: SendActivity
              id: send_phase11
              activity: "[11/11] Researching government contracts..."

            - kind: BeginDialog
              id: call_GovernmentContracts
              input:
                company_name: =Global.CompanyName
                domain: =Global.Domain
              dialog: my_bot.agent.Agent_wvm

            - kind: SetVariable
              id: increment_phase11
              variable: Global.CurrentPhase
              value: =12

            - kind: SetVariable
              id: track_phase11
              variable: Global.CompletedPhases
              value: =Global.CompletedPhases & "11,"

      elseActions:
        - kind: SendActivity
          id: send_complete
          activity: "Research complete. Completed phases: {Global.CompletedPhases}"

inputType: {}
outputType: {}
